
node
{
def mavenHome= tool name="maven 3.6.2"
def buildNumber= BUILD_NUMBER
stage("Code checkout")
{
git credentialsId: 'gitcredentials', url: 'https://github.com/navya-devops-applications/spring-mongo-docker.git'
}
stage("Build Packages")
{
sh "${mavenHome}/bin/mvn clean package"
}
stage("Build Image")
{
sh "docker build -t navyadevops/springapp:${buildNumber} ."
}
stage("Authenticating")
{
withCredentials([usernameColonPassword(credentialsId: 'Dockerhubpwd', variable: 'Dockerhubpwd')]) {
   sh "docker login -u navyadevops -p ${Dockerhubpwd}"
}
}
stage("Deploying into kubernetes cluster")
{
