node
{
def mvnHome = tool name : "maven 3.6.2"
stage("checkout code")
{
git credentialsId: '33b14771-b858-4cc9-aac8-40a58e2ee672', url: 'https://github.com/navya-devops-applications/spring-mongo-docker.git'
}
stage("Build packages")
{
sh "${maven 3.6.2}/bin/mvn clean package"
}
stage("Build image")
{
sh " docker build -t navyadevops/javawebapp:2 ."
}
stage("Push image")
{
withCredentials([string(credentialsId: 'Docker_hub_pwd', variable: 'Docker_hub_pwd')]) {
  docker login -u navyadevops -p ${Docker_hub_pwd} 
}
sh " docker push navyadevops/javawebapp:2

